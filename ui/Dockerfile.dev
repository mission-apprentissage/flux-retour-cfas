FROM node:18-alpine

WORKDIR /app

# Map arguments to react-scripts env variables
ARG NEXT_PUBLIC_ENV
ARG NEXT_PUBLIC_BASE_URL
ARG NEXT_PUBLIC_BASE_HOST
ARG NEXT_PUBLIC_METABASE_URL
ARG NEXT_PUBLIC_METABASE_SECRET_KEY
ENV NEXT_PUBLIC_ENV=$NEXT_PUBLIC_ENV
ENV NEXT_PUBLIC_BASE_URL=$NEXT_PUBLIC_BASE_URL
ENV NEXT_PUBLIC_BASE_HOST=$NEXT_PUBLIC_BASE_HOST
ENV NEXT_PUBLIC_METABASE_URL=$NEXT_PUBLIC_METABASE_URL
ENV NEXT_PUBLIC_METABASE_SECRET_KEY=$NEXT_PUBLIC_METABASE_SECRET_KEY
ENV WATCHPACK_POLLING true

EXPOSE 3000
CMD yarn docker-dev
